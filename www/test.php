<?php

include(__DIR__ . "/libs/debugger.php");

$extensionName = 'php_linearalgebra';
$extensionFuncs = get_extension_funcs($extensionName);

echo "<h1>Extension '$extensionName' testing</h1>";

echo "<h2>Status</h2>";

if (extension_loaded($extensionName)) {
    echo "<p>Loaded</p>";
} else {
    echo "<p>Not loaded</p>";
}

echo "<h2>Functions</h2>";

if ($extensionFuncs && gettype($extensionFuncs) === 'array') {
    echo "<p>" . count($extensionFuncs) . " extensions found:</p>";
    echo "<ul>";
    foreach ($extensionFuncs as $efIndex => $extensionFunc) {
        $efNum = $efIndex + 1;
        echo "<li>$efNum. $extensionFunc</li>";
    }
    echo "</ul>";
} else {
    echo "<p>0 extensions found</p>";
}

$A = [[523.9458680496,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-8.8,-8.8,-69.825,-69.825,-240.65],[-2.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1.1018290363347,0,0,0,0,12.388636355678,-0.16263712510132,-1.2904701432045,-1.2904701432045,-2.2237854633883],[-2.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1.1018290363347,0,0,0,-0.16263712510132,12.388636355678,-1.2904701432045,-1.2904701432045,-2.2237854633883],[-2.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.92383965094082,0,0,-0.16263712510132,-0.16263712510132,28.09670284107,-1.2904701432045,-2.2237854633883],[-2.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.92383965094082,0,-0.16263712510132,-0.16263712510132,-1.2904701432045,28.09670284107,-2.2237854633883],[-5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.91472849298353,-0.16263712510132,-0.16263712510132,-1.2904701432045,-1.2904701432045,8.8209430295953],[0,0,0,0,0,0,0,0,0,0,0,-0.55091451816733,0,0,0,0,9.2916324433909,0,0,0,0,-1.1018290363347,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,-0.55091451816733,0,0,0,0,9.2916324433909,0,0,0,0,-1.1018290363347,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,-0.46191982547041,0,0,0,0,1.3857594764112,0,0,0,0,-0.92383965094082,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.46191982547041,0,0,0,0,1.3857594764112,0,0,0,0,-0.92383965094082,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.45736424649176,0,0,0,0,1.3720927394753,0,0,0,0,-0.91472849298353],[0,0,0,0,0,0,-0.55091451816733,0,0,0,0,8.7407179252235,0,0,0,0,-0.55091451816733,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,-0.55091451816733,0,0,0,0,8.7407179252235,0,0,0,0,-0.55091451816733,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,-0.46191982547041,0,0,0,0,0.92383965094082,0,0,0,0,-0.46191982547041,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,-0.46191982547041,0,0,0,0,0.92383965094082,0,0,0,0,-0.46191982547041,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,-0.45736424649176,0,0,0,0,21.748061826317,0,0,0,0,-0.45736424649176,0,0,0,0,0],[0,-1.1018290363347,0,0,0,0,9.2916324433909,0,0,0,0,-0.55091451816733,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,-1.1018290363347,0,0,0,0,9.2916324433909,0,0,0,0,-0.55091451816733,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,-0.92383965094082,0,0,0,0,1.3857594764112,0,0,0,0,-0.46191982547041,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,-0.92383965094082,0,0,0,0,1.3857594764112,0,0,0,0,-0.46191982547041,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,-0.91472849298353,0,0,0,0,1.3720927394753,0,0,0,0,-0.45736424649176,0,0,0,0,0,0,0,0,0,0],[0,29.061273480779,0,0,0,0,-1.1018290363347,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,29.061273480779,0,0,0,0,-1.1018290363347,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,8.5538396509408,0,0,0,0,-0.92383965094082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,8.5538396509408,0,0,0,0,-0.92383965094082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,11.044728492984,0,0,0,0,-0.91472849298353,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];
$b = [2421.643725422,76.388888888889,76.388888888889,416.66666666667,416.66666666667,0,152.77777777778,152.77777777778,0,0,0,152.77777777778,152.77777777778,0,0,416.66666666667,152.77777777778,152.77777777778,0,0,0,31.892888888889,31.892888888889,-41.022,-41.022,202.6];

echo "<h3>Gaussian Elimination</h3>";
debugger::mark("A");
$x = solveSLE_php($A, $b, "gaussianElimination", false);
debugger::mark("B");
echo "Size(A) = " . count($A[0]) . "<br>";
echo "TIME: " . debugger::time("A", "B") . "<br>";
echo "Solution x = <br>";
echo print_r($x);
echo "<hr>";

echo "<h3>Eigen's colPivHouseholderQr</h3>";
debugger::mark("C");
$x = solveSLE_php($A, $b, "colPivHouseholderQr", false);
debugger::mark("D");
echo "Size(A) = " . count($A[0]) . "<br>";
echo "TIME: " . debugger::time("C", "D") . "<br>";
echo "Solution x = <br>";
echo print_r($x);
echo "<hr>";

?>